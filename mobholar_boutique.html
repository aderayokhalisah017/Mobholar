<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Affordableluxurybymobholar | Boutique</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Playfair+Display:ital,wght@0,400;1,600&display=swap');
        :root { --purple-cement: linear-gradient(135deg, #f3e7ff 0%, #e3eeff 100%); --blush: #fff5f5; }
        
        body { font-family: 'Outfit', sans-serif; margin: 0; background: #fff; color: #1a1a1a; padding-bottom: 100px; -webkit-tap-highlight-color: transparent; }

        /* ANNOUNCEMENT & HEADER */
        .top-announcement { background: #000; color: #fff; padding: 10px; font-size: 10px; text-align: center; letter-spacing: 2px; font-weight: 600; text-transform: uppercase; }
        header { position: sticky; top: 0; z-index: 1000; background: #fff; padding: 12px 5%; border-bottom: 1px solid #eee; display: flex; flex-direction: column; align-items: center; }
        .logo { font-family: 'Playfair Display'; font-weight: 800; font-size: 22px; text-transform: uppercase; color: #000; cursor: pointer; letter-spacing: 1px; }
        
        /* CATEGORIES */
        .category-scroll { display: flex; gap: 15px; overflow-x: auto; padding: 15px 5%; scrollbar-width: none; }
        .cat-item { text-align: center; flex-shrink: 0; width: 70px; cursor: pointer; }
        .cat-circle { width: 64px; height: 64px; border-radius: 50%; border: 1px solid #eee; overflow: hidden; background: #f9f9f9; margin: 0 auto 6px; box-shadow: 0 4px 8px rgba(0,0,0,0.04); }
        .cat-circle img { width: 100%; height: 100%; object-fit: cover; }
        .cat-item span { font-size: 10px; font-weight: 700; text-transform: uppercase; color: #333; }

        /* FILTER HEADER */
        .filter-header { padding: 15px 5%; background: #fdfbff; border-bottom: 1px solid #f0eaff; display: none; justify-content: space-between; align-items: center; }

        /* TRENDS SECTION */
        .showcase-cement { margin: 5px 5% 25px; background: var(--purple-cement); border-radius: 20px; padding: 20px; box-shadow: inset 0 0 20px rgba(255,255,255,0.5); }
        .section-title { font-family: 'Playfair Display'; font-size: 19px; margin: 0 0 12px 0; font-style: italic; color: #4b3d61; font-weight: 600; }
        .trend-scroll { display: flex; gap: 12px; overflow-x: auto; scrollbar-width: none; }
        .trend-box { width: 95px; height: 130px; flex-shrink: 0; background: #fff; border-radius: 12px; overflow: hidden; border: 3px solid #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .trend-box img { width: 100%; height: 100%; object-fit: cover; }

        /* PRODUCT GRID */
        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; padding: 0 5%; }
        @media (min-width: 600px) { .grid { grid-template-columns: repeat(3, 1fr); } }
        .card { background: #fff; border-radius: 8px; overflow: hidden; position: relative; }
        .img-box { aspect-ratio: 3/4; background: #f5f5f5; border-radius: 6px; overflow: hidden; cursor: pointer; }
        .img-box img { width: 100%; height: 100%; object-fit: cover; }
        .price-tag { font-weight: 800; font-size: 17px; color: #000; margin-top: 6px; display: block; }
        .item-name { font-size: 11px; color: #777; margin: 2px 0 10px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        /* ADMIN PANEL */
        #admin { position: fixed; top: 0; right: -100%; width: 92%; max-width: 400px; height: 100%; background: #fff; z-index: 10000; padding: 25px; transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); overflow-y: auto; box-shadow: -10px 0 30px rgba(0,0,0,0.15); box-sizing: border-box; }
        #admin.active { right: 0; }
        .admin-input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; background: #f8f8f8; border: 1px solid #ddd; border-radius: 6px; font-family: inherit; font-size: 14px; box-sizing: border-box; }
        .save-btn { background: #000; color: #fff; border: none; padding: 16px; border-radius: 8px; width: 100%; font-weight: 800; cursor: pointer; margin-top: 10px; font-size: 14px; }
        .gear-btn { position: fixed; bottom: 25px; left: 25px; width: 55px; height: 55px; background: #000; color: #fff; border-radius: 50%; border: none; z-index: 9000; font-size: 24px; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }

        /* MODAL */
        #productModal { position: fixed; inset: 0; background: #fff; z-index: 9999; display: none; overflow-y: auto; }
        .modal-img { width: 100%; aspect-ratio: 3/4; object-fit: cover; }
        .modal-info { padding: 25px; }
        .order-btn { background: #000; color: #fff; text-align: center; padding: 18px; border-radius: 10px; font-weight: 800; margin-top: 20px; cursor: pointer; display: block; text-decoration: none; font-size: 15px; }
        .reco-section { padding: 30px 5%; border-top: 8px solid #f9f9f9; }
        .reco-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-top: 15px; }
    </style>
</head>
<body>

    <div class="top-announcement">AFFORDABLE LUXURY BY MOBHOLAR</div>

    <header>
        <div class="logo" onclick="clearFilter()">MOBHOLAR</div>
    </header>

    <div id="filterHeader" class="filter-header">
        <span id="filterName" style="font-weight: 800; text-transform: uppercase; font-size: 13px; color: purple;">Category</span>
        <button onclick="clearFilter()" style="border: none; background: #000; color: #fff; padding: 6px 15px; border-radius: 20px; font-size: 10px; font-weight: 800;">VIEW ALL</button>
    </div>

    <div class="category-scroll" id="catScroll"></div>

    <div id="mainPageContent">
        <div class="showcase-cement">
            <div class="section-title">Latest Trends</div>
            <div class="trend-scroll" id="trendList"></div>
        </div>
        <div style="padding: 0 5% 15px;"><div class="section-title" id="gridTitle">Shop Collection</div></div>
    </div>

    <div class="grid" id="mainGrid"></div>

    <button class="gear-btn" onclick="openAdmin()">‚öôÔ∏è</button>

    <div id="admin">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 25px;">
            <h2 style="font-family:'Playfair Display'; margin:0;">Boutique Manager</h2>
            <button onclick="toggleAdmin()" style="border:none; background:none; font-size:28px; cursor:pointer;">‚úï</button>
        </div>

        <div style="background:#f4eeff; padding:18px; border-radius:12px; margin-bottom:20px;">
            <p style="font-weight:800; font-size:12px; margin:0 0 10px;">1. CATEGORIES</p>
            <input type="text" id="catN" class="admin-input" placeholder="Name (e.g. Gowns)">
            <input type="text" id="catI" class="admin-input" placeholder="Image URL">
            <button class="save-btn" style="background:purple;" onclick="addCat()">Add Category Circle</button>
            <div id="adminCats" style="margin-top:10px;"></div>
        </div>

        <div style="background:#f9f9f9; padding:18px; border-radius:12px;">
            <p style="font-weight:800; font-size:12px; margin:0 0 10px;">2. ADD NEW PRODUCT</p>
            <input type="file" id="fileIn" style="display:none;" onchange="handleImg(this)">
            <button onclick="document.getElementById('fileIn').click()" style="width:100%; padding:15px; border:2px dashed #ccc; background:#fff; cursor:pointer; margin-bottom:10px; border-radius:8px;">üì∏ Select Photo from Gallery</button>
            
            <label style="font-size:11px; font-weight:bold;">Assign Category:</label>
            <select id="prodCatSelect"></select>

            <input type="text" id="name" class="admin-input" placeholder="Product Name">
            <input type="text" id="price" class="admin-input" placeholder="Price (e.g. ‚Ç¶20,000)">
            <input type="text" id="mat" class="admin-input" placeholder="Material">
            <textarea id="desc" class="admin-input" placeholder="Description..." rows="3"></textarea>
            
            <label style="font-size:13px; display:flex; align-items:center; gap:8px; margin:10px 0;">
                <input type="checkbox" id="isTrend" style="width:18px; height:18px;"> Add to Purple Trend Section?
            </label>

            <p style="font-size:11px; font-weight:bold; margin-top:15px;">Pick Recommendations:</p>
            <div id="recoSelector" style="max-height:100px; overflow-y:auto; border:1px solid #ddd; background:#fff; padding:8px; border-radius:6px;"></div>
            
            <button class="save-btn" onclick="publish()">Publish Product</button>
        </div>
        <div id="inv" style="margin-top:25px; border-top:1px solid #eee; padding-top:15px;"></div>
    </div>

    <div id="productModal">
        <button onclick="closeModal()" style="position:fixed; top:20px; right:20px; font-size:25px; border:none; background:#fff; border-radius:50%; width:45px; height:45px; box-shadow:0 4px 15px rgba(0,0,0,0.1); z-index:10001;">‚úï</button>
        <div id="modalContent">
            <img id="mImg" class="modal-img">
            <div class="modal-info">
                <div id="mCat" style="font-size:11px; color:purple; font-weight:800; text-transform:uppercase;"></div>
                <h1 id="mTitle" style="font-family:'Playfair Display'; font-size:26px; margin:5px 0;"></h1>
                <div id="mPrice" style="font-size:22px; font-weight:800; margin-bottom:15px;"></div>
                <div style="background:var(--blush); padding:20px; border-radius:15px; border:1px solid #ffe4e4; line-height:1.6; font-size:14px;">
                    <b style="color:#000;">Material:</b> <span id="mMat"></span><br><br>
                    <span id="mDesc"></span>
                </div>
                <a id="waBtn" class="order-btn">ORDER VIA WHATSAPP</a>
            </div>
            <div class="reco-section">
                <div class="section-title" style="font-size:16px;">YOU MIGHT ALSO LIKE</div>
                <div class="reco-grid" id="recoGrid"></div>
            </div>
        </div>
    </div>

    <script>
        const KEY = 'mobholar_final_ultimate_v2';
        let db = { categories: [], items: {} };
        let currentFilter = null;
        let tempImg = "";

        // Load data
        try { const saved = localStorage.getItem(KEY); if(saved) db = JSON.parse(saved); } catch(e) {}

        function handleImg(input) {
            const reader = new FileReader();
            reader.onload = e => { tempImg = e.target.result; alert("Image Loaded!"); };
            reader.readAsDataURL(input.files[0]);
        }

        function render() {
            const prods = Object.entries(db.items || {}).reverse();

            // Categories Circles
            document.getElementById('catScroll').innerHTML = (db.categories || []).map(c => `
                <div class="cat-item" onclick="filterBy('${c.name}')">
                    <div class="cat-circle"><img src="${c.img}"></div>
                    <span>${c.name}</span>
                </div>
            `).join('');

            // Admin: Category Dropdown
            document.getElementById('prodCatSelect').innerHTML = `<option value="">General Collection</option>` + 
                (db.categories || []).map(c => `<option value="${c.name}">${c.name}</option>`).join('');

            // Trending Showcase
            const trending = prods.filter(([id, p]) => p.isTrend);
            document.getElementById('trendList').innerHTML = trending.map(([id, p]) => `
                <div class="trend-box" onclick="openDetails('${id}')"><img src="${p.img}"></div>
            `).join('');

            // Filtering Logic
            let displayProds = prods;
            if(currentFilter) {
                displayProds = prods.filter(([id, p]) => p.category === currentFilter);
                document.getElementById('mainPageContent').style.display = 'none';
                document.getElementById('filterHeader').style.display = 'flex';
                document.getElementById('filterName').innerText = currentFilter;
            } else {
                document.getElementById('mainPageContent').style.display = 'block';
                document.getElementById('filterHeader').style.display = 'none';
            }

            // Main Grid
            document.getElementById('mainGrid').innerHTML = displayProds.map(([id, p]) => `
                <div class="card" onclick="openDetails('${id}')">
                    <div class="img-box"><img src="${p.img}"></div>
                    <span class="price-tag">${p.price}</span>
                    <p class="item-name">${p.name}</p>
                </div>
            `).join('');

            // Admin Extras
            document.getElementById('recoSelector').innerHTML = prods.map(([id, p]) => `<label style="display:block; font-size:11px; margin-bottom:4px;"><input type="checkbox" class="reco-check" value="${id}"> ${p.name}</label>`).join('');
            document.getElementById('inv').innerHTML = prods.map(([id, p]) => `<div style="padding:8px; border-bottom:1px solid #eee; font-size:12px;">${p.name} <button onclick="deleteItem('${id}')" style="color:red; float:right; border:none; background:none; font-weight:800; cursor:pointer;">DELETE</button></div>`).join('');
            document.getElementById('adminCats').innerHTML = (db.categories || []).map((c, i) => `<div style="font-size:11px; margin-top:5px;">${c.name} <button onclick="db.categories.splice(${i},1); save(); render();" style="color:red; float:right; border:none; background:none;">REMOVE</button></div>`).join('');
        }

        function filterBy(name) { currentFilter = name; window.scrollTo(0,0); render(); }
        function clearFilter() { currentFilter = null; render(); }

        function openDetails(id) {
            const p = db.items[id];
            document.getElementById('mImg').src = p.img;
            document.getElementById('mCat').innerText = p.category || 'Luxury';
            document.getElementById('mTitle').innerText = p.name;
            document.getElementById('mPrice').innerText = p.price;
            document.getElementById('mMat').innerText = p.mat;
            document.getElementById('mDesc').innerText = p.desc;
            document.getElementById('waBtn').href = `https://wa.me/234?text=Order: ${encodeURIComponent(p.name)}`;

            const recos = p.recos || [];
            document.getElementById('recoGrid').innerHTML = recos.map(rid => {
                const rp = db.items[rid];
                return rp ? `<div onclick="openDetails('${rid}')"><img src="${rp.img}" style="width:100%; aspect-ratio:3/4; border-radius:6px; object-fit:cover;"><div style="font-weight:800; font-size:13px; margin-top:5px;">${rp.price}</div></div>` : '';
            }).join('');

            document.getElementById('productModal').style.display = 'block';
            document.getElementById('productModal').scrollTo(0,0);
        }

        function publish() {
            const name = document.getElementById('name').value;
            if(!tempImg || !name) return alert("Missing Photo or Name!");
            const recos = Array.from(document.querySelectorAll('.reco-check:checked')).map(el => el.value);
            db.items[Date.now()] = { 
                img: tempImg, name, price: document.getElementById('price').value, 
                category: document.getElementById('prodCatSelect').value,
                mat: document.getElementById('mat').value, desc: document.getElementById('desc').value, 
                isTrend: document.getElementById('isTrend').checked, recos 
            };
            tempImg = ""; document.getElementById('name').value = ""; 
            save(); render(); alert("PUBLISHED!");
        }

        function addCat() {
            const n = document.getElementById('catN').value, i = document.getElementById('catI').value;
            if(n && i) { db.categories.push({ name: n, img: i }); save(); render(); }
        }

        function save() { localStorage.setItem(KEY, JSON.stringify(db)); }
        function toggleAdmin() { document.getElementById('admin').classList.toggle('active'); }
        function openAdmin() { if(prompt("Code:") === 'mobholar') toggleAdmin(); }
        function closeModal() { document.getElementById('productModal').style.display = 'none'; }
        function deleteItem(id) { if(confirm("Delete item?")) { delete db.items[id]; save(); render(); } }

        window.onload = render;
    </script>
</body>
</html>